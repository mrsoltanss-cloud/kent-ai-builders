"use client";
import HomeAiShowcase from "@/components/home/HomeAiShowcase";
import HowItWorksShow from "@/components/home/HowItWorksShow";
/* eslint-disable react-hooks/exhaustive-deps */
import QuickLinksCategories from "../components/QuickLinksCategories";
import MinimalTrustPanel from "../components/MinimalTrustPanel";

import TrustSection from "../components/TrustSection";
import Image from "next/image";
import Link from "next/link";
import { useEffect, useRef, useState } from "react";
import HeaderActions from "@/components/HeaderActions";
import TrustHero from "@/components/TrustHero";

import HowItWorksBlock from "@/components/home/HowItWorksBlock";

export default function Home() {
  const suggestions = ["Leaky roof","Wall needs repointing","Kitchen renovation","Emergency plumber"];
  <QuickLinksCategories />
  const [sIndex, setSIndex] = useState(0);
  useEffect(() => {
    const id = setInterval(() => setSIndex(i => (i + 1) % suggestions.length), 2400);
    return () => clearInterval(id);
  }, []);

  const reviews = [
    { quote: "They handled the extension from start to finish. Stress-free.", name: "Mark, Medway" },
    { quote: "Fair price, tidy team, and kept us informed daily.", name: "Amelia, Tonbridge" },
    { quote: "Emergency leak sorted within hours. Brilliant.", name: "Tom, Sevenoaks" },
  ];
  const [rIndex, setRIndex] = useState(0);
  useEffect(() => {
    const id = setInterval(() => setRIndex(i => (i + 1) % reviews.length), 3800);
    return () => clearInterval(id);
  }, []);

  const cats = [
    { key: "plumbing", label: "Plumber", emoji: "üö∞" },
    { key: "electrical", label: "Electrician", emoji: "‚ö°" },
    { key: "roofing", label: "Roofer", emoji: "üè†" },
    { key: "builder", label: "Builder", emoji: "üë∑" },
    { key: "gardener", label: "Gardener", emoji: "ü™¥" },
    { key: "decorator", label: "Painter / Decorator", emoji: "üñåÔ∏è" },
    { key: "driveways", label: "Driveways", emoji: "üß±" },
    { key: "kitchens", label: "Kitchens", emoji: "üç≥" },
    { key: "bathrooms", label: "Bathrooms", emoji: "üõÅ" },
  ];
  const scroller = useRef(null);
  const scrollBy = (px) => scroller.current?.scrollBy({ left: px, behavior: "smooth" });

  return (
    <main className="min-h-[100dvh] bg-white text-slate-900">
  {/* HEADER */}
      <header className="sticky top-0 z-40 w-full border-b bg-white/90 backdrop-blur">
  <div className="mx-auto max-w-6xl px-4 h-16 flex items-center justify-between">
    {/* Left: brand / logo */}
    <div className="flex items-center gap-2">
      
      <Link href="/" className="font-semibold text-base">Brixel</Link>
    </div>

    {/* Middle: nav */}
    <nav className="hidden md:flex items-center gap-8 text-[15px]">
      <Link href="/#homeowner" className="hover:opacity-80">Homeowner</Link>
      <Link href="/#trades" className="hover:opacity-80">Trades</Link>
    </nav>

    {/* Right: actions */}
    <HeaderActions />
  </div>
</header>



      {/* HERO */}
      <section className="relative overflow-hidden">
        <div className="absolute inset-0 z-0">
          <Image
            src="/images/hero-kitchen.jpg"
            alt="Modern kitchen"
            fill
            priority
            sizes="100vw"
            className="object-cover"
          />
        </div>
        <div className="absolute inset-0 z-10 bg-black/55" />
        <div className="relative z-20 mx-auto max-w-6xl px-4 sm:px-6 pt-12 sm:pt-16 md:pt-20 pb-10 sm:pb-14 md:pb-24 text-center md:text-left">
          <h1 className="text-white font-extrabold leading-tight text-3xl sm:text-4xl md:text-6xl">
            Build Smarter. Faster. Fairer.
            <br />
            <span className="text-teal-400">Kent‚Äôs #1 AI-Powered Builder</span>
          </h1>
          <p className="mt-3 sm:mt-4 text-white/90 text-sm sm:text-base md:text-lg">
            Instant quotes ‚Ä¢ Verified builders ‚Ä¢ Guaranteed work
          </p>
          <form
            onSubmit={(e) => {
              e.preventDefault();
              const input = e.currentTarget.elements.namedItem("q");
              const value = input && typeof input.value === "string" ? input.value.trim() : "";
              const q = value || suggestions[sIndex];
              window.location.href = `/quote?query=${encodeURIComponent(q)}`;
            }}
            className="mt-5 sm:mt-6 max-w-3xl mx-auto md:mx-0"
            aria-label="Get an instant estimate"
          >
            <div className="flex flex-col sm:flex-row gap-3">
              <input
                name="q"
                className="flex-1 w-full rounded-2xl bg-white/95 backdrop-blur border border-white/20 px-5 py-4 outline-none shadow"
                placeholder={suggestions[sIndex]}
                aria-label="Describe your job"
              />
              <button
                type="submit"
                className="w-full sm:w-auto rounded-2xl px-6 py-4 bg-teal-600 text-white font-semibold hover:bg-teal-700 shadow-md"
              >
                Get Estimate
              </button>
            </div>
            <p className="mt-3 text-xs sm:text-sm text-white/90">
              Try: ‚Äú{suggestions[(sIndex + 1) % suggestions.length]}‚Äù
            </p>
          </form>

          <div className="mt-5 sm:mt-6 flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center md:justify-start">
            <Link href="/quote" className="w-full sm:w-auto text-center rounded-xl bg-teal-600 text-white px-5 py-3 font-semibold hover:bg-teal-700">
              Get My Instant Estimate
            </Link>
            <a href="https://wa.me/447000000000" className="w-full sm:w-auto text-center rounded-xl border border-white text-white px-5 py-3 font-semibold hover:bg-white hover:text-teal-700">
              Talk on WhatsApp
            </a>
          </div>

          <p className="mt-4 text-white/80 text-xs sm:text-sm">
            ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ Trusted by 2,000+ Kent homeowners ‚Ä¢ Fully Insured ‚Ä¢ Free Site Survey
          </p>
        </div>
      </section>

      {/* Browse our most popular categories</h2>

<MinimalTrustPanel />

<div className="relative mt-6 sm:mt-8">
            <button aria-label="scroll left" onClick={() => scrollBy(-320)} className="hidden md:grid place-content-center absolute left-0 top-1/2 -translate-y-1/2 bg-white border rounded-full w-10 h-10 shadow">‚Äπ</button>
            <div ref={scroller} className="flex gap-4 sm:gap-5 overflow-x-auto px-2 snap-x snap-mandatory scroll-smooth">
              {cats.map((c) => (
                <Link key={c.key} href={`/services/${c.key}`} className="min-w-[190px] sm:min-w-[230px] snap-start rounded-3xl border px-5 sm:px-6 py-5 sm:py-6 hover:shadow-md hover:border-teal-500 transition bg-white">
                  <div className="text-3xl sm:text-4xl">{c.emoji}</div>
                  <div className="mt-3 sm:mt-4 font-semibold">{c.label}</div>
                </Link>
              ))}
            </div>
            <button aria-label="scroll right" onClick={() => scrollBy(320)} className="hidden md:grid place-content-center absolute right-0 top-1/2 -translate-y-1/2 bg-white border rounded-full w-10 h-10 shadow">‚Ä∫</button>
          </div>
        </div>
      </section>

      {/* TRUST */}
      <section className="bg-[#0f1b24] text-white hidden">
        <div className="mx-auto max-w-6xl px-4 sm:px-6 py-12 sm:py-14 grid grid-cols-1 md:grid-cols-2 gap-6 sm:gap-10 items-center">
          <div className="grid grid-cols-2 gap-3 sm:gap-4 order-2 md:order-1">
            <div className="relative h-40 sm:h-48 md:h-64 rounded-2xl overflow-hidden bg-white/5">
              <Image src="/images/trust-handshake.jpg" alt="Handshake" fill sizes="(max-width: 768px) 50vw, 33vw" className="object-cover" />
            </div>
            <div className="relative h-40 sm:h-48 md:h-64 rounded-2xl overflow-hidden bg-white/5">
              <Image src="/images/trust-team.jpg" alt="Team on site" fill sizes="(max-width: 768px) 50vw, 33vw" className="object-cover" />
            </div>
          </div>
          <div className="order-1 md:order-2">
            <h2 className="text-xl sm:text-2xl md:text-3xl font-bold">Why homeowners trust us</h2>
            <ul className="mt-3 sm:mt-4 space-y-1.5 sm:space-y-2 text-gray-200 text-sm sm:text-base">
              <li>ü§ñ Instant, fair AI-powered pricing</li>
              <li>üßë‚Äçüîß Verified, experienced local builders</li>
              <li>üõ° Fully insured & guaranteed work</li>
              <li>üöÄ Fast response + free survey</li>
            </ul>
            <div className="mt-5 grid grid-cols-3 gap-3 sm:gap-4">
              {[
                { big: "2,300+", small: "Projects" },
                { big: "4.9/5", small: "Avg rating" },
                { big: "10+ yrs", small: "Experience" },
              ].map((s, i) => (
                <div key={i} className="rounded-xl bg-white/5 px-3 sm:px-4 py-3 sm:py-4 text-center">
                  <div className="text-lg sm:text-2xl font-bold">{s.big}</div>
                  <div className="text-[11px] sm:text-sm text-gray-300">{s.small}</div>
                </div>
              ))}
            </div>
            <div className="mt-4 flex flex-wrap gap-2">
              {["DBS-checked teams","¬£5m Public Liability","NICEIC / Gas Safe","CSCS qualified","12-month workmanship guarantee"].map((b, i) => (
                <span key={i} className="rounded-full bg-white/10 px-3 py-1 text-xs sm:text-sm">{b}</span>
              ))}
            </div>
            <Link href="/quote" className="inline-block mt-5 rounded-xl bg-teal-500 text-white px-5 py-3 font-semibold hover:bg-teal-600">
              Get your instant estimate ‚Üí
            </Link>
          </div>
        </div>
      </section>

      {/* TESTIMONIALS */}
      

<TrustSection />
<section className="mx-auto max-w-6xl px-4 sm:px-6 py-12 sm:py-14">
        

{/* Epic How it works slideshow */}
<HowItWorksBlock />
<h2 className="text-xl sm:text-2xl md:text-3xl font-bold text-center text-teal-600">What our customers say</h2>
        <div className="mt-6 sm:mt-8 grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6">
          {[0,1,2].map(offset => {
            const i = (rIndex + offset) % reviews.length;
            const r = reviews[i];
            return (
              <div key={i} className="rounded-3xl border p-4 sm:p-6 hover:border-teal-500">
                
                <p className="mt-2 sm:mt-3 text-gray-800 text-sm sm:text-base">‚Äú{r.quote}‚Äù</p>
                <p className="mt-2 sm:mt-3 text-xs sm:text-sm text-gray-500">{r.name}</p>
              </div>
            );
          })}
        </div>
      </section>

      {/* GUIDES */}
      
{/* AI Showcase (replaces Cost guides block) */}
<section><HomeAiShowcase/>
</section>


      {/* ACTION CARDS */}
      


      {/* FINAL CTA */}
      <section className="bg-teal-700 text-white">
        <div className="mx-auto max-w-6xl px-4 sm:px-6 py-12 sm:py-14 text-center">
          <h2 className="text-2xl sm:text-3xl font-bold">Ready to build smarter?</h2>
          <p className="mt-2 text-white/90 text-sm sm:text-base">Kent‚Äôs only AI-powered builder. Get your instant estimate today.</p>
          <div className="mt-6 flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center">
            <Link href="/quote" className="rounded-xl bg-white text-teal-700 px-6 py-3 font-semibold hover:bg-gray-100">Get My Instant Estimate</Link>
            <a href="https://wa.me/447000000000" className="rounded-xl border border-white text-white px-6 py-3 font-semibold hover:bg-white hover:text-teal-700">Talk on WhatsApp</a>
          </div>
        </div>
      </section>

      {/* FOOTER */}
      <footer className="bg-[#0f1b24] text-white">
        <div className="mx-auto max-w-6xl px-4 sm:px-6 py-8 sm:py-10 grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8">
          <div>
            <h4 className="font-semibold">Contact</h4>
            <p className="mt-2 text-white/80 text-sm">üìû 07000 000000</p>
            <p className="text-white/80 text-sm">‚úâÔ∏è hello@brixel.uk</p>
          </div>
          <div>
            <h4 className="font-semibold">Service Areas</h4>
            <p className="mt-2 text-white/80 text-sm">Kent ‚Ä¢ Maidstone ‚Ä¢ Canterbury ‚Ä¢ Ashford ‚Ä¢ Medway</p>
          </div>
          <div>
            <h4 className="font-semibold">Trust</h4>
            <p className="mt-2 text-white/80 text-sm">üõ° Fully insured & guaranteed</p>
            <p className="text-white/60 text-sm mt-2">¬© Brixel 2025</p>
          </div>
        </div>
      </footer>
      <TrustHero />
        </main>
  );
}